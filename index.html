<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Biryani:wght@400;900&display=swap" rel="stylesheet"> 
    <link rel="stylesheet"
            href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    <title>Open House festival</title>

<meta itemprop="description" content="">
<meta itemprop="image" content="/images/social.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Open House festival">
<meta name="twitter:description"
content="">
<meta name="twitter:site" content="/images/social.png">
<meta name="og:title" content="Open House festival">
<meta name="og:description"
content="">
<meta name="og:image" content="/images/social.png">
<meta name="og:url" content="/">
<meta name="og:site_name" content="Open House festival">
<meta name="og:locale" content="cs_CZ">
<meta name="og:type" content="website">


</head>

<body>
    <div id="head-stripe">
        <div class="container">
            <a href="https://mall.tv"><img src="images/malltv.svg" alt="Mall.tv"></a>
        </div>
    </div>
    <div id="video-invitation" class="section">
        <div class="wrapper">
            <div class="logo">
                <img src="images/logo.png">
            </div>
            <div class="em-cont">          
                <div class="embed">
                    <iframe loading="lazy" scrolling="no" src="https://www.mall.tv/embed/gebrian-prekvapive-stavby/dum-radost-na-zizkove" frameborder="0"
                    gesture="media" allow="encrypted-media" allowfullscreen=""></iframe>
                </div>
            </div>
        </div>
    </div>
    <h2>Co vidět během festivalu</h2>

    
    <h2>Další díly Překvapivých staveb</h2>

    <div class="section">
        <h2>#openhousepraha na Instagramu</h2>
        <div id="openhousepraha-hashtag" class="instagram-feed"></div>
    </div>
    <div id="malltv-promo" class="section malltvapp">
        <div class="container">
            <div class="mtvapp100">
                <h2 class="h2-app">Sledujte MALL.TV na všech zařízeních</h2>
            </div>
            <div class="mtvapp1">
                <div class="applinksbox">
                    <p>Vaše oblíbené pořady MALL.TV, můžete sledovat pohodlně v mobilu, ve své Smart TV
                        nebo na
                        XBOXU! Stačí si jen vybrat.</p>
                    <a target="_blank" href="https://apps.apple.com/cz/app/mall-tv/id1446896639" class="store grow"><img
                            src="images/app-store.png" alt="App Store"></a>
                    <a target="_blank" href="https://play.google.com/store/apps/details?id=mall.tv&amp;hl=cs"
                        class="store grow"><img src="images/google-play.png" alt="Google Play"></a>
                    <p class="platformy">MALL.TV lze sledovat na všech těchto platformách a zařízeních:</p>
                    <div class="platformy">
                        <img src="images/platformy/1.png" alt="Apple TV">
                        <img src="images/platformy/2.png" alt="PC">
                        <img src="images/platformy/3.png" alt="Tablet">
                        <img src="images/platformy/4.png" alt="Mobil">
                        <img src="images/platformy/5.png" alt="Internet">
                        <a href="https://www.microsoft.com/cs-cz/p/malltv/9nqg4rfv1jp3?cid=msft_web_chart"
                            target="_blank"><img src="images/platformy/6.png" alt="XBOX"></a>
                        <img src="images/platformy/7.png" alt="Smart TV">
                    </div>
                </div>
            </div>
            <div class="mtvapp2">
                <div class="mobil"><img src="images/aplikace2.png" width="300" alt="mobilní aplikace"></div>
            </div>
        </div>

    </div>

    <div id="footer" class="section">
        <div class="container">
            © 2020 Internet Mall, a. s.
        </div>
    </div>

    <script>
        function generateInstagramFeed(wrapperID, instagramURL, maxPosts) {
            let wrapperDiv = document.querySelector("#" + wrapperID);

            var getTimeAgo = function getTimeAgo(date) {
                var getDelta = function getDelta(seconds) {
                    var delta = Math.round(seconds / 60);
                    if (delta <= 0) return 'před okamžikem';
                    if (delta == 1) return 'před minutou';
                    if (delta < 45) return "před " + delta + " minutami";
                    if (delta < 90) return 'před hodinou';
                    if (delta < 1440) return 'před ' + Math.round(delta / 60) + ' hodinami';
                    if (delta < 2880) return 'včera';
                    if (delta < 43200) return 'před ' + Math.round(delta / 1440) + ' dny';
                    if (delta < 86400) return 'před měsícem';
                    if (delta < 525960) return 'před ' + Math.round(delta / 43200) + ' měsíci';
                    if (delta < 1051920) return 'před rokem';
                    return 'před ' + Math.round(delta / 525960) + ' lety';
                };

                var now = new Date();
                console.log(now.getTime(), "now");
                console.log(date, "date");
                var delta = (now.getTime() - date * 1000) / 1000;
                return getDelta(delta);
            };

            fetch('https://www.instagram.com/' + instagramURL + '/?__a=1')
                .then(res => res.json())
                .then(json => json.graphql.hashtag.edge_hashtag_to_media.edges)
                .then(data => {
                    for (let i = 0; i <= maxPosts - 1; i++) {
                        // console.log("Popis", data[i].node.edge_media_to_caption.edges[0].node.text)

                        let timeAgo = getTimeAgo(data[i].node.taken_at_timestamp);

                        let postHTML = `<div class="instagram-post">
                                            <a target="_blank" href="https://www.instagram.com/p/${data[i].node.shortcode}">
                                                <div class="instagram-image">
                                                    <img src="${data[i].node.thumbnail_src}">
                                                    <div class="instagram-timeago">${timeAgo}</div>
                                                    <div class="instagram-overlay">
                                                    <div>
                                                        <p><i class="las la-heart"></i> ${data[i].node.edge_media_preview_like.count}</p>
                                                        <p><i class="las la-comments"></i> ${data[i].node.edge_media_to_comment.count}</p>
                                                    </div>    
                                                    </div>
                                                </div>
                                            </a>
                                        </div>`;
                        wrapperDiv.innerHTML += postHTML;
                    }

                });
        }
        generateInstagramFeed("openhousepraha-hashtag", "explore/tags/openhousepraha", 24);

    </script>    
</body>
</html>